import{a6 as k,r as s,Q as v,A as w,u as g,a as S,j as e,k as x,T as m}from"./index-jZLvl1ko.js";function A(){const[u]=k(),[f,a]=s.useState(!0),[h,j]=s.useState(!1),[i,o]=s.useState(null),n=v(),{login:p}=s.useContext(w),b=g(t=>t.setSuccessData),y=g(t=>t.setErrorData),l=u.get("token");s.useEffect(()=>{if(!l){o("Ogiltig √•terst√§llningsl√§nk. V√§nligen beg√§r en ny l√∂senords√•terst√§llning."),a(!1);return}N()},[l]);const N=async()=>{var t,d;try{const r=await S.get(`/api/v1/email/reset-password?token=${l}`);r.data.access_token&&(p(r.data.access_token,"password_reset",r.data.refresh_token),j(!0),b({title:"L√∂senords√•terst√§llning lyckades! Du √§r nu inloggad. G√• till Inst√§llningar f√∂r att √§ndra ditt l√∂senord."}),setTimeout(()=>{n("/settings")},3e3))}catch(r){const c=((d=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:d.detail)||"Ogiltig eller utg√•ngen √•terst√§llningsl√§nk.";o(c),y({title:"L√∂senords√•terst√§llning Misslyckades",list:[c]})}finally{a(!1)}};return f?e.jsx("div",{className:"h-screen w-full",children:e.jsx("div",{className:"flex h-full w-full flex-col items-center justify-center bg-gradient-to-br from-background to-muted/30",children:e.jsx("div",{className:"flex w-96 flex-col items-center justify-center gap-6 rounded-2xl bg-card/80 backdrop-blur-sm border border-border/50 p-8 shadow-2xl",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("img",{src:"/logo192.png",alt:"Axie Studio logo",className:"h-12 w-12 rounded-xl object-contain",onError:t=>{t.currentTarget.style.display="none",t.currentTarget.nextElementSibling.style.display="flex"}}),e.jsx("div",{className:"h-12 w-12 bg-primary text-primary-foreground rounded-xl items-center justify-center font-bold text-lg hidden",children:"AS"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-light text-foreground tracking-tight",children:"Bearbetar √Öterst√§llningsl√§nk..."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"V√§nligen v√§nta medan vi verifierar din √•terst√§llningstoken"})]})]})})})}):h?e.jsx("div",{className:"h-screen w-full",children:e.jsx("div",{className:"flex h-full w-full flex-col items-center justify-center bg-gradient-to-br from-background to-muted/30",children:e.jsxs("div",{className:"flex w-96 flex-col items-center justify-center gap-6 rounded-2xl bg-card/80 backdrop-blur-sm border border-border/50 p-8 shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[e.jsx("img",{src:"/logo192.png",alt:"Axie Studio logo",className:"h-12 w-12 rounded-xl object-contain",onError:t=>{t.currentTarget.style.display="none",t.currentTarget.nextElementSibling.style.display="flex"}}),e.jsx("div",{className:"h-12 w-12 bg-primary text-primary-foreground rounded-xl items-center justify-center font-bold text-lg hidden",children:"AS"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-light text-foreground tracking-tight",children:"L√∂senords√•terst√§llning Lyckades!"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Du √§r nu inloggad p√• ditt konto"})]})]}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Du √§r inloggad!"}),e.jsx("br",{}),e.jsx("strong",{children:"Ange ett nytt l√∂senord"})," f√∂r att s√§kra ditt konto",e.jsx("br",{}),e.jsx("strong",{children:"V√§lj ett starkt l√∂senord"})," f√∂r att h√•lla ditt konto s√§kert"]})}),e.jsx(x,{onClick:()=>n("/change-password?from_reset=true"),className:"w-full h-11 bg-primary hover:bg-primary/90 text-primary-foreground font-medium",children:"Ange Nytt L√∂senord"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:e.jsx(m,{to:"/",className:"text-primary hover:underline font-medium",children:"Forts√§tt till Instrumentpanel"})})})]})]})})}):i?e.jsx("div",{className:"h-screen w-full",children:e.jsx("div",{className:"flex h-full w-full flex-col items-center justify-center bg-gradient-to-br from-background to-muted/30",children:e.jsxs("div",{className:"flex w-96 flex-col items-center justify-center gap-6 rounded-2xl bg-card/80 backdrop-blur-sm border border-border/50 p-8 shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[e.jsx("img",{src:"/logo192.png",alt:"Axie Studio logo",className:"h-12 w-12 rounded-xl object-contain",onError:t=>{t.currentTarget.style.display="none",t.currentTarget.nextElementSibling.style.display="flex"}}),e.jsx("div",{className:"h-12 w-12 bg-primary text-primary-foreground rounded-xl items-center justify-center font-bold text-lg hidden",children:"AS"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-light text-foreground tracking-tight",children:"√Öterst√§llningsl√§nk Ogiltig"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:i})]})]}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-red-800",children:["üö® ",e.jsx("strong",{children:"Denna √•terst√§llningsl√§nk √§r ogiltig eller har g√•tt ut"}),e.jsx("br",{}),"üîó ",e.jsx("strong",{children:"Beg√§r en ny √•terst√§llningsl√§nk"})," fr√•n inloggningssidan",e.jsx("br",{}),"‚è∞ ",e.jsx("strong",{children:"√Öterst√§llningsl√§nkar g√•r ut efter 24 timmar"})]})}),e.jsx(x,{onClick:()=>n("/forgot-password"),className:"w-full h-11 bg-primary hover:bg-primary/90 text-primary-foreground font-medium",children:"Beg√§r Ny √Öterst√§llningsl√§nk"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:e.jsx(m,{to:"/login",className:"text-primary hover:underline font-medium",children:"Tillbaka till inloggning"})})})]})]})})}):null}export{A as default};
